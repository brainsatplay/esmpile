(()=>{var et=Object.create;var pe=Object.defineProperty;var tt=Object.getOwnPropertyDescriptor;var rt=Object.getOwnPropertyNames;var nt=Object.getPrototypeOf,ot=Object.prototype.hasOwnProperty;var at=(e=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(e,{get:(t,r)=>(typeof require!="undefined"?require:t)[r]}):e)(function(e){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var st=(e,t)=>()=>(e&&(t=e(e=0)),t);var it=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),J=(e,t)=>{for(var r in t)pe(e,r,{get:t[r],enumerable:!0})},lt=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of rt(t))!ot.call(e,n)&&n!==r&&pe(e,n,{get:()=>t[n],enumerable:!(o=tt(t,n))||o.enumerable});return e};var Me=(e,t,r)=>(r=e!=null?et(nt(e)):{},lt(t||!e||!e.__esModule?pe(r,"default",{value:e,enumerable:!0}):r,e));var Se=it(te=>{(function(e){(function(t){typeof define=="function"&&define.amd?define(["exports"],t):typeof te=="object"&&typeof te.nodeName!="string"?t(te):t(e)})(function(t){"use strict";var r=e.BlobBuilder||e.WebKitBlobBuilder||e.MSBlobBuilder||e.MozBlobBuilder,o=e.URL||e.webkitURL||function(u,l){return l=document.createElement("a"),l.href=u,l},n=e.Blob,s=o.createObjectURL,i=o.revokeObjectURL,p=e.Symbol&&e.Symbol.toStringTag,h=!1,E=!1,R=r&&r.prototype.append&&r.prototype.getBlob;try{h=new Blob(["\xE4"]).size===2,E=new Blob([new Uint8Array([1,2])]).size===2}catch{}function f(u){return u.map(function(l){if(l.buffer instanceof ArrayBuffer){var d=l.buffer;if(l.byteLength!==d.byteLength){var m=new Uint8Array(l.byteLength);m.set(new Uint8Array(d,l.byteOffset,l.byteLength)),d=m.buffer}return d}return l})}function x(u,l){l=l||{};var d=new r;return f(u).forEach(function(m){d.append(m)}),l.type?d.getBlob(l.type):d.getBlob()}function _(u,l){return new n(f(u),l||{})}e.Blob&&(x.prototype=Blob.prototype,_.prototype=Blob.prototype);function A(u){for(var l=0,d=u.length,m=e.Uint8Array||Array,b=0,v=Math.max(32,d+(d>>1)+7),g=new m(v>>3<<3);l<d;){var c=u.charCodeAt(l++);if(c>=55296&&c<=56319){if(l<d){var M=u.charCodeAt(l);(M&64512)===56320&&(++l,c=((c&1023)<<10)+(M&1023)+65536)}if(c>=55296&&c<=56319)continue}if(b+4>g.length){v+=8,v*=1+l/u.length*2,v=v>>3<<3;var q=new Uint8Array(v);q.set(g),g=q}if((c&4294967168)===0){g[b++]=c;continue}else if((c&4294965248)===0)g[b++]=c>>6&31|192;else if((c&4294901760)===0)g[b++]=c>>12&15|224,g[b++]=c>>6&63|128;else if((c&4292870144)===0)g[b++]=c>>18&7|240,g[b++]=c>>12&63|128,g[b++]=c>>6&63|128;else continue;g[b++]=c&63|128}return g.slice(0,b)}function z(u){for(var l=u.length,d=[],m=0;m<l;){var b=u[m],v=null,g=b>239?4:b>223?3:b>191?2:1;if(m+g<=l){var c,M,q,U;switch(g){case 1:b<128&&(v=b);break;case 2:c=u[m+1],(c&192)===128&&(U=(b&31)<<6|c&63,U>127&&(v=U));break;case 3:c=u[m+1],M=u[m+2],(c&192)===128&&(M&192)===128&&(U=(b&15)<<12|(c&63)<<6|M&63,U>2047&&(U<55296||U>57343)&&(v=U));break;case 4:c=u[m+1],M=u[m+2],q=u[m+3],(c&192)===128&&(M&192)===128&&(q&192)===128&&(U=(b&15)<<18|(c&63)<<12|(M&63)<<6|q&63,U>65535&&U<1114112&&(v=U))}}v===null?(v=65533,g=1):v>65535&&(v-=65536,d.push(v>>>10&1023|55296),v=56320|v&1023),d.push(v),m+=g}for(var C=d.length,T="",k=0;k<C;)T+=String.fromCharCode.apply(String,d.slice(k,k+=4096));return T}var O=typeof TextEncoder=="function"?TextEncoder.prototype.encode.bind(new TextEncoder):A,j=typeof TextDecoder=="function"?TextDecoder.prototype.decode.bind(new TextDecoder):z;function X(){function u(a){for(var y=new Array(a.byteLength),w=new Uint8Array(a),F=y.length;F--;)y[F]=w[F];return y}function l(a){for(var y="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",w=[],F=0;F<a.length;F+=3){var L=a[F],G=F+1<a.length,Y=G?a[F+1]:0,Ee=F+2<a.length,Fe=Ee?a[F+2]:0,Qe=L>>2,Ze=(L&3)<<4|Y>>4,Te=(Y&15)<<2|Fe>>6,Re=Fe&63;Ee||(Re=64,G||(Te=64)),w.push(y[Qe],y[Ze],y[Te],y[Re])}return w.join("")}var d=Object.create||function(a){function y(){}return y.prototype=a,new y};function m(a){return Object.prototype.toString.call(a).slice(8,-1)}function b(a,y){return typeof a=="object"&&Object.prototype.isPrototypeOf.call(a.prototype,y)}function v(a){return m(a)==="DataView"||b(e.DataView,a)}var g=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","ArrayBuffer"];function c(a,y){return a.indexOf(y)!==-1}function M(a){return c(g,m(a))||b(e.ArrayBuffer,a)}function q(a){for(var y=0,w=a.length;w--;)y+=a[w].length;for(var F=new Uint8Array(y),L=0,G=0;G<a.length;G++){var Y=a[G];F.set(Y,L),L+=Y.byteLength||Y.length}return F}function U(a,y){a=a||[],y=y??{};for(var w=0,F=a.length;w<F;w++){var L=a[w];L instanceof U?a[w]=L._buffer:typeof L=="string"?a[w]=O(L):v(L)?a[w]=u(L.buffer):M(L)?a[w]=u(L):a[w]=O(String(L))}this._buffer=e.Uint8Array?q(a):[].concat.apply([],a),this.size=this._buffer.length,this.type=y.type||"",/[^\u0020-\u007E]/.test(this.type)?this.type="":this.type=this.type.toLowerCase()}U.prototype.arrayBuffer=function(){return Promise.resolve(this._buffer.buffer||this._buffer)},U.prototype.text=function(){return Promise.resolve(j(this._buffer))},U.prototype.slice=function(a,y,w){var F=this._buffer.slice(a||0,y||this._buffer.length);return new U([F],{type:w})},U.prototype.toString=function(){return"[object Blob]"};function C(a,y,w){w=w||{};var F=U.call(this,a,w)||this;return F.name=y.replace(/\//g,":"),F.lastModifiedDate=w.lastModified?new Date(w.lastModified):new Date,F.lastModified=+F.lastModifiedDate,F}if(C.prototype=d(U.prototype),C.prototype.constructor=C,Object.setPrototypeOf)Object.setPrototypeOf(C,U);else try{C.__proto__=U}catch{}C.prototype.toString=function(){return"[object File]"};function T(){if(!(this instanceof T))throw new TypeError("Failed to construct 'FileReader': Please use the 'new' operator, this DOM object constructor cannot be called as a function.");var a=document.createDocumentFragment();this.addEventListener=a.addEventListener,this.dispatchEvent=function(y){var w=this["on"+y.type];typeof w=="function"&&w(y),a.dispatchEvent(y)},this.removeEventListener=a.removeEventListener}function k(a,y,w){if(!(y instanceof U))throw new TypeError("Failed to execute '"+w+"' on 'FileReader': parameter 1 is not of type 'Blob'.");a.result="",setTimeout(function(){this.readyState=T.LOADING,a.dispatchEvent(new Event("load")),a.dispatchEvent(new Event("loadend"))})}T.EMPTY=0,T.LOADING=1,T.DONE=2,T.prototype.error=null,T.prototype.onabort=null,T.prototype.onerror=null,T.prototype.onload=null,T.prototype.onloadend=null,T.prototype.onloadstart=null,T.prototype.onprogress=null,T.prototype.readAsDataURL=function(a){k(this,a,"readAsDataURL"),this.result="data:"+a.type+";base64,"+l(a._buffer)},T.prototype.readAsText=function(a){k(this,a,"readAsText"),this.result=j(a._buffer)},T.prototype.readAsArrayBuffer=function(a){k(this,a,"readAsText"),this.result=(a._buffer.buffer||a._buffer).slice()},T.prototype.abort=function(){},o.createObjectURL=function(a){return a instanceof U?"data:"+a.type+";base64,"+l(a._buffer):s.call(o,a)},o.revokeObjectURL=function(a){i&&i.call(o,a)};var de=e.XMLHttpRequest&&e.XMLHttpRequest.prototype.send;de&&(XMLHttpRequest.prototype.send=function(a){a instanceof U?(this.setRequestHeader("Content-Type",a.type),de.call(this,j(a._buffer))):de.call(this,a)}),t.Blob=U,t.File=C,t.FileReader=T,t.URL=o}function S(){var u=!!e.ActiveXObject||"-ms-scroll-limit"in document.documentElement.style&&"-ms-ime-align"in document.documentElement.style,l=e.XMLHttpRequest&&e.XMLHttpRequest.prototype.send;u&&l&&(XMLHttpRequest.prototype.send=function(d){d instanceof Blob?(this.setRequestHeader("Content-Type",d.type),l.call(this,d)):l.call(this,d)});try{new File([],""),t.File=e.File,t.FileReader=e.FileReader}catch{try{t.File=new Function('class File extends Blob {constructor(chunks, name, opts) {opts = opts || {};super(chunks, opts || {});this.name = name.replace(/\\//g, ":");this.lastModifiedDate = opts.lastModified ? new Date(opts.lastModified) : new Date();this.lastModified = +this.lastModifiedDate;}};return new File([], ""), File')()}catch{t.File=function(b,v,g){var c=new Blob(b,g),M=g&&g.lastModified!==void 0?new Date(g.lastModified):new Date;return c.name=v.replace(/\//g,":"),c.lastModifiedDate=M,c.lastModified=+M,c.toString=function(){return"[object File]"},p&&(c[p]="File"),c}}}}h?(S(),t.Blob=E?e.Blob:_):R?(S(),t.Blob=x):X(),p&&(t.File.prototype[p]||(t.File.prototype[p]="File"),t.Blob.prototype[p]||(t.Blob.prototype[p]="Blob"),t.FileReader.prototype[p]||(t.FileReader.prototype[p]="FileReader"));var H=t.Blob.prototype,P;try{new ReadableStream({type:"bytes"}),P=function(){var l=0,d=this;return new ReadableStream({type:"bytes",autoAllocateChunkSize:524288,pull:function(m){var b=m.byobRequest.view,v=d.slice(l,l+b.byteLength);return v.arrayBuffer().then(function(g){var c=new Uint8Array(g),M=c.byteLength;l+=M,b.set(c),m.byobRequest.respond(M),l>=d.size&&m.close()})}})}}catch{try{new ReadableStream({}),P=function(d){var m=0;return new ReadableStream({pull:function(b){var v=d.slice(m,m+524288);return v.arrayBuffer().then(function(g){m+=g.byteLength;var c=new Uint8Array(g);b.enqueue(c),m==d.size&&b.close()})}})}}catch{try{new Response("").body.getReader().read(),P=function(){return new Response(this).body}}catch{P=function(){throw new Error("Include https://github.com/MattiasBuelens/web-streams-polyfill")}}}}function ne(u){return new Promise(function(l,d){u.onload=u.onerror=function(m){u.onload=u.onerror=null,m.type==="load"?l(u.result||u):d(new Error("Failed to read the blob/file"))}})}H.arrayBuffer||(H.arrayBuffer=function(){var l=new FileReader;return l.readAsArrayBuffer(this),ne(l)}),H.text||(H.text=function(){var l=new FileReader;return l.readAsText(this),ne(l)}),H.stream||(H.stream=P)})})(typeof self<"u"&&self||typeof window<"u"&&window||typeof global<"u"&&global||te)});var Ie={};J(Ie,{default:()=>dt});var $e,dt,_e=st(()=>{$e=Me(Se(),1),dt=$e.Blob});var $={};J($,{absolute:()=>N,base:()=>De,extension:()=>D,get:()=>B,noBase:()=>I,url:()=>Z});var Q="application/javascript",Be=e=>!e||e==="application/javascript",he={js:Q,mjs:Q,cjs:Q,ts:"text/typescript",json:"application/json",html:"text/html",css:"text/css",txt:"text/plain",svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",webp:"image/webp",mp3:"audio/mpeg",mp4:"video/mp4",webm:"video/webm",ogg:"application/ogg",wav:"audio/wav"},oe=e=>he[e];var ye={};J(ye,{defaults:()=>K,getMainPath:()=>Ae,path:()=>ae,resolve:()=>je,transformation:()=>V});var K={nodeModules:"node_modules",relativeTo:"./"},ae=e=>{let t=e.nodeModules??K.nodeModules,r=e.relativeTo??K.relativeTo;return B(t,r)},je=async(e,t)=>{let r=ae(t),o=e.split("/"),n=B(e,r);if(o.length>1){if(D(n))return n;n+="/package.json"}return await Ae(e,n,t).catch(s=>{console.warn(`${n} does not exist or is not at the root of the project.`)})},Le=(e,t,r)=>B(e,r,!1,t.split("/").length===1),ct=(e,t=e)=>Le("package.json",e,t),Ae=async(e,t=e,r={})=>{let o=await ft(e,t,r);if(!o)return t;let n=o.module||o.main||"index.js";return Le(n,e,t)},ft=async(e,t=e,r)=>{let o=ct(e,t);return(await import(Z(o)?o:new URL(o,window.location.href).href,{assert:{type:"json"}})).default},V={name:"node_modules",handler:je};var ee="://",B=(e,t="",r=!1,o=!1)=>{if(Z(e))return e;let n="",s=f=>(n=f.includes(ee)?f.split(ee).splice(0,1):void 0,n?f.replace(`${n}${ee}`,""):f);e.includes(ee)&&(e=s(e)),t.includes(ee)&&(t=s(t)),r||(t=t.split("/").filter(f=>f!="..").join("/")),t[t.length-1]==="/"&&(t=t.slice(0,-1));let i=t.split("/");if(i.length===1&&i[0]===""&&(i=[]),!o){let f=i.pop();if(f){let x=f.split(".");(x.length==1||x.length>1&&x.includes(""))&&i.push(f)}}let E=e.split("/").filter((f,x)=>!!f).filter((f,x)=>f===".."?(i.pop(),!1):f!=="."),R=[...i,...E].join("/");return n?n+"://"+R:R};function N(e,t){let r=e[0]!==".",o=Z(e);return r&&(t||!o)}function Z(e){try{return new URL(e),!0}catch{return!1}}var D=e=>{let t=e.split("/").slice(-1)[0].split(".").slice(-1)[0];if(he[t])return t},De=e=>e.substring(0,e.lastIndexOf("/")),I=(e,t,r)=>{e=globalThis.location?e.replace(`${De(globalThis.location.href)}/`,"./"):e;let o=N(e,!0),n=t.relativeTo??K.relativeTo,s=t.nodeModules??K.nodeModules;if(o)return e;{let i=e;return r&&(i=i.replace(`${s}/`,"")),i=i.replace(`${n.split("/").slice(0,-1).join("/")}/`,""),i[0]!=="."&&(i=`./${i}`),i}};var be=e=>{let t;try{t=new URL(e).href}catch{t=B(e,globalThis.location.href)}return t},Oe=async(e,t={})=>{t.mode||(t.mode="cors");let r=be(e),o=t?.callbacks?.progress?.fetch,n=await ut(r,t,{path:e,progress:o});if(!n.buffer)throw new Error("No response received.");let s=n.type.split(";")[0];return{...n,url:r,type:s}},ut=async(e,t={},r)=>{let o=r.path??e,n=B(I(o,t)),s=await globalThis.fetch(e,t),i=0,p=[],h=0,E=await new Promise(async R=>{if(s){h=parseInt(s.headers.get("Content-Length"),10);let f=s.headers.get("Content-Type");if(globalThis.REMOTEESM_NODE){let x=await s.arrayBuffer();R({buffer:x,type:f})}else{let x=s.body.getReader(),_=async({done:A,value:z})=>{if(A){let j={};typeof f=="string"&&(j.type=f);let S=await new Blob(p,j).arrayBuffer();R({buffer:new Uint8Array(S),type:f});return}i+=z.length;let O=z;return p.push(O),r.progress instanceof Function&&r.progress(n,i,h,null,null,s.headers.get("Range")),x.read().then(_)};x.read().then(_)}}else console.warn("Response not received!",t.headers),R(void 0)});if(r.progress instanceof Function){let R=[null,null];s.ok?R[0]=!0:R[1]=!0,r.progress(n,i,h,...R,s.headers.get("Range"))}return{response:s,...E}};var Ce=new Promise(async(e,t)=>{try{if(typeof process=="object"){globalThis.REMOTEESM_NODE=!0,globalThis.fetch=(await import("node-fetch")).default,typeof globalThis.fetch!="function"&&(globalThis.fetch=fetch);let r=(await Promise.resolve().then(()=>(_e(),Ie))).default;globalThis.Blob=r,typeof globalThis.Blob!="function"&&(globalThis.Blob=r),e(!0)}else e(!0)}catch(r){t(r)}});var Ke={};J(Ke,{get:()=>Mt});var se={};J(se,{get:()=>yt,getURI:()=>we});var ge={};J(ge,{script:()=>xe});var xe=async e=>await new Promise((t,r)=>{let o=document.createElement("script"),n=!1;o.onload=o.onreadystatechange=function(){!n&&(!this.readyState||this.readyState=="complete")&&(n=!0,t(window))},o.onerror=r,o.src=e,document.body.insertAdjacentElement("beforeend",o)});function ht(e){let t="",r=new Uint8Array(e),o=r.byteLength;for(let n=0;n<o;n++)t+=String.fromCharCode(r[n]);return window.btoa(t)}var we=(e,t="text/javascript",r,o=!1)=>{let n=r==="buffer"?ht(e):btoa(o?unescape(encodeURIComponent(e)):e);return`data:${t};base64,`+n},mt=async(e,t)=>await(t?import(e,{assert:{type:"json"}}):import(e)).catch(r=>{throw r}),yt=async(e,t,r)=>{let o=typeof e=="string"?"text":"buffer",n,s;if(!r){let p=D(t);r=oe(p)}let i=r==="application/json";try{n=we(e,r,o),s=await mt(n,i)}catch(p){n=we(e,r,o,!0),Be(r)?s=n=await bt(n,p).catch(h=>{throw h}):s=n}return{datauri:n,module:s}};async function bt(e,t){if(t.message.includes("The string to be encoded contains characters outside of the Latin1 range.")||t.message.includes("Cannot set properties of undefined"))return await xe(e);throw t}var ie={};J(ie,{get:()=>xt});function xt(e){typeof e=="string"&&(e=new TextEncoder().encode(e));let t=new Blob([e],{type:"text/javascript"});return URL.createObjectURL(t)}var He=["ts","js"],Ne=[...He,V],Pe=e=>{let t=D(e),r=N(e),o=r?e.split("/").length===1:!1,n=!t;if(!o&&r&&n){let s=He.map(i=>({extension:i,name:`${V.name} + ${i}`,handler:V.handler}));return e.split("/").length===1?[V,...s]:[...s,V]}else return r?[...Ne].reverse():n?[...Ne]:[]};var vt="was not resolved locally. You can provide a direct reference to use in",le=(e,t=e)=>new Error(`${e} ${vt} options.filesystem._fallbacks['${t}'].`);var ze=(e,t="js")=>{let r=N(e),o=e.split("/"),n=D(e);return(!r||r&&o.length>1)&&!n?`${e}.${t}`:e},Xe=async(e,t,r,o)=>{let n=typeof t;if(n==="string"&&(!o||o==="string"))return ze(e,t);if(n==="object"&&(!o||o==="object"))return t.extension&&(e=ze(e,t.extension)),await t.handler(e,r).catch(s=>{throw le(e,I(e,r))})};var Et={compilerOptions:{target:"ES2015",module:"ES2020",strict:!1,esModuleInterop:!0}},ke=(e,t="text")=>{if(window.ts){let r=t!=="buffer"?e[t].updated:new TextDecoder().decode(e[t]);return e.text.updated=window.ts.transpile(r,Et.compilerOptions),t==="buffer"?(e.buffer=new TextEncoder().encode(e.text.updated),e.buffer):e.text.updated}else throw new Error("Must load TypeScript extension to compile TypeScript files using remoteESM.load.script(...);")};var Tt=new TextDecoder("utf-8"),ce=async(e,t,r)=>{let o=await Oe(e,t),n=o.response,s={uri:e,response:n,text:{original:"",updated:""},buffer:null};if(n.ok){if(r){let i=n.headers.get("Content-Type");if(!i.includes(r))throw new Error(`Expected Content Type ${r} but received ${i} for  ${e}`)}s.buffer=o.buffer,s.text.original=s.text.updated=Tt.decode(s.buffer)}else throw new Error(n.statusText);return s},Je=async(e,t,r)=>{let o=Pe(e),n;if(o.length>0){do{let s=o.shift(),i=s?.name??s,p=f=>{t.debug&&console.error(`Import using ${i??s} transformation failed for ${e}`)},h=await Xe(e,s,t),E=B(h,t.relativeTo);n=await r(E,t,s?null:"application/javascript").then(f=>(t.debug&&console.warn(`Import using ${i??s} transformation succeeded for ${e}`),f)).catch(p)}while(!n&&o.length>0);if(!n)throw new Error(`No valid transformation found for ${e}`)}else n=await r(B(e,t.relativeTo),t);return n},Ve=async(e,t)=>{let o=D(e)==="json",n={};return await Je(e,t,async s=>{n.uri=s,n.module=await(o?import(s,{assert:{type:"json"}}):import(s))}),n},Ge=async(e,t)=>await Je(e,t,ce),fe=async(e,t="buffer")=>{let r=t==="text"?e.text.updated:e.buffer,o=D(e.uri),n=oe(o);switch(n){case"text/typescript":r=ke(e,t),n=Q;break}let s=await se.get(r,e.uri,n),i=ie.get(r);return e.module=s.module,e.datauri=s.datauri,e.objecturl=i,e};var Rt=/\/\/# sourceMappingURL=(.*\.map)/,Mt=async(e,t,r,o=!0)=>{if(r||(r=(await ce(e,t)).text.original),r){let n=r.match(Rt);if(n){let s=async()=>{let i=B(n[1],e),h=(await ce(i,t)).text.original;h.slice(0,3)===")]}"&&(console.warn("Removing source map invalidation characters"),h=h.substring(h.indexOf(`
`)));let E={module:JSON.parse(h)};return E.text={original:h,updated:null},E};return o?s():s}}};var W=class{value=void 0;dependencies=new Set;dependents=new Set;constructor(){}compile=()=>{};set=t=>{this.value=t};addDependency=t=>{this.dependencies.add(t),t.dependents.add(this)};removeDependency=t=>{this.dependencies.delete(t),t.dependents.delete(this)}};globalThis.REMOTEESM_BUNDLES={global:{}};var Bt=/[^\n]*(?<![\/\/])import\s+([ \n\t]*(?:(?:\* (?:as .+))|(?:[^ \n\t\{\}]+[ \n\t]*,?)|(?:[ \n\t]*\{(?:[ \n\t]*[^ \n\t"'\{\}]+[ \n\t]*,?)+\}))[ \n\t]*)from[ \n\t]*(['"])([^'"\n]+)(?:['"])([ \n\t]*assert[ \n\t]*{type:[ \n\t]*(['"])([^'"\n]+)(?:['"])})?/gm,Nt=B,Ht=$,ve=globalThis.REMOTEESM_BUNDLES.global,Ue=(e,t)=>{let o=ue(t.bundle).bundle,n=[e.datauri,e.objecturl];o[e.uri]||(o[e.uri]=new W),ve[e.uri]?t.bundle!="global"&&t.debug&&console.warn("Duplicating this import. Already tracking globally...",e.uri):ve[e.uri]=o[e.uri],ve[e.uri].value=o[e.uri].value=t.bundler==="objecturl"?n[1]??n[0]:n[0]??n[1]},jt=async(e,t,r)=>{let{variables:o,wildcard:n}=t,s=t.path,i=N(s),p,h=i?s:B(s,e.uri),E=ae(r);h=h.replace(`${E}/`,"");let R=I(h,r),f=re(h,r),x=re(e.uri,r),_=ue(r.bundle,f),A=_.bundle,z=A.value,O=!1,j=ue(r.bundle,x);if(j.bundle.dependents.has(f)&&(O=!0),j.bundle.dependencies.add(f),A.dependencies.has(x)&&(O=!0),A.dependents.add(x),O){let S=`Circular dependency detected: ${x} <-> ${f}.`;throw new Error(S)}if(!z){A.value=null;let S=be(h),H=R,P={output:{},...r,root:S};if(P.output.text=!0,p=await Lt(H,P,{original:s,transformed:h}),r.dependencies&&(r.dependencies[e.uri]||(r.dependencies[e.uri]={}),r.dependencies[e.uri][p.uri]=t),p.fallback)A.value=p.module;else{let ne=await fe({text:p.text,uri:f},"text");Ue(ne,r)}}let X=A.value;return typeof X=="string"?e.text.updated=`import ${n?"* as ":""}${o} from "${X}"; // Imported from ${f}
                  ${e.text.updated}`:e.text.updated=`const ${o} = globalThis.REMOTEESM_BUNDLE["${_.id}"]["${f}"];
            ${e.text.updated}`,p},Lt=async(e,t,r={original:e,transformed:e})=>await new Promise(async(o,n)=>{await We(e,{...t,onImport:(s,i)=>{t.onImport instanceof Function&&t.onImport(s,i),i.original===e&&o(i)}}).catch(s=>{if(s.message.includes("Circular dependency detected"))n(s);else{let i=N(r.original)?I(r.original,t,!0):I(r.transformed,t,!0);console.warn(`Failed to fetch ${e}. Checking filesystem references...`);let p=t.filesystem?._fallbacks?.[i];if(p)console.warn(`Got fallback reference (module only) for ${e}.`),Object.defineProperty({module:p},"fallback",{value:!0,enumerable:!1}),o({module:p});else{let h="was not resolved locally. You can provide a direct reference to use in";s.message.includes(h)?n(s):n(le(e,i))}}})});function ue(e,t){e||(e=Math.random());let r=globalThis.REMOTEESM_BUNDLES[e];return r||(r=globalThis.REMOTEESM_BUNDLES[e]={}),t&&(r[t]||(r[t]=new W),r=r[t]),{id:e,bundle:r}}function re(e,t){return B(I(e,t))}var We=async(e,t={})=>{t=Object.assign({},t);let{onImport:r=()=>{},output:o={}}=t,n=0,s=0,i=t.callbacks?.progress?.file,p=typeof i=="function",h=re(e,t);try{if(!t.bundle){let x=ue(t.bundle);t.bundle=x.id}t.bundler||(t.bundler="objecturl"),await Ce;let E={},R=o.text||o.datauri||o.objecturl,f=R?void 0:await Ve(e,t).catch(x=>{});if(E.module=f?.module,f?.uri&&(h=re(f.uri,t)),!E.module||R){let x=await Ge(e,t);h=re(x.uri,t);try{E=await fe(x),Ue(E,t)}catch{let A=[];Array.from(x.text.updated.matchAll(Bt)).forEach(j=>{x.text.updated=x.text.updated.replace(j[0],"");let X=!!j[1].match(/\*\s+as/),S=j[1].replace(/\*\s+as/,"").trim();A.push({path:j[3],variables:S,wildcard:X})}),s=A.length;let O=A.map(async j=>{await jt(x,j,t),n++,p&&i(h,n,s)});await Promise.all(O),E=await fe(x,"text"),Ue(E,t)}}return p&&i(h,n,s,!0),E.original=e,r(h,E),E.module}catch(E){throw p&&i(h,n,s,null,E),E}},Pt=We;})();
//# sourceMappingURL=index.js.map
